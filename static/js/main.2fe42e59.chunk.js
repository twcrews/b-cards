(this["webpackJsonpb-cards"]=this["webpackJsonpb-cards"]||[]).push([[0],{107:function(e,n,t){},140:function(e,n){},158:function(e,n,t){"use strict";t.r(n);var c=t(0),a=t.n(c),i=t(10),r=t.n(i),o=t(90),l=t(29),s=t(13),d=t(34),j=t(209),u=t(210),b=t(211),f=t(212),O=t(213),h=t(160),x=t(226),g=t(215),m=t(227),p=t(214),v=t(162),k=t(216),C=t(91),y=t(217),w=t(221),S=t(222),N=t(206),D=t(225),A=t(205),F=t(195),I=t(218),E=t(219),T=t(220),B=t(208),W=t(223),L=t(224),P=(t(107),t(83)),R=t.n(P),G=t(2);function J(e){return Object(G.jsxs)("div",{className:"EmptyState",children:[Object(G.jsx)(R.a,{style:{fontSize:200}}),Object(G.jsx)(d.a,{variant:"h6",children:e.children}),Object(G.jsx)(h.a,{variant:"contained",onClick:e.onClick,color:"primary",startIcon:e.buttonIcon,children:e.button})]})}var z=t(198),U=t(161),M=t(199),V=t(200),q=t(201),K=t(202),H=t(203),$=t(204),_=t(194),Q=t(196),X=t(197),Y=t(53),Z=t.n(Y);function ee(e){return Object(G.jsxs)(_.a,{elevation:3,square:!0,className:"Card",children:[Object(G.jsxs)("div",{className:"CardHeader BorderBox CenterVertical",children:[Object(G.jsx)("div",{className:"LeftAlign",children:Object(G.jsx)(d.a,{variant:"h6",children:e.flipped?"Back":"Front"})}),Object(G.jsx)("div",{className:"CenterAlign",children:Object(G.jsx)(d.a,{variant:"h6",children:e.number+" of "+e.count})}),Object(G.jsx)("div",{className:"RightAlign"})]}),Object(G.jsx)("div",{className:"CardContent",children:Object(G.jsx)("div",{children:Z()(e.content)})}),Object(G.jsxs)("div",{className:"CardTools CenterVertical BorderBox",children:[Object(G.jsx)("span",{className:"AutoWidth LeftAlign",children:Object(G.jsx)(h.a,{onClick:e.onDuplicate,size:"large",startIcon:Object(G.jsx)(F.a,{}),disabled:e.flaggedOnly,children:"Duplicate"})}),Object(G.jsx)("span",{className:"AutoWidth CenterAlign",children:Object(G.jsx)(h.a,{className:e.flagged?"FlagButtonActive":"",variant:e.flagged?"contained":"text",startIcon:Object(G.jsx)(Q.a,{color:"inherit"}),onClick:function(){e.onFlag()},size:"large",disableElevation:!0,children:e.flagged?"Flagged":"Flag"})}),Object(G.jsx)("div",{className:"FlexGap RightAlign",children:Object(G.jsx)(h.a,{onClick:e.onFlip,startIcon:Object(G.jsx)(X.a,{}),size:"large",children:"Flip"})})]})]})}var ne=t(88),te=t.n(ne);function ce(e){var n,t,a,i,r=Object(c.useState)(!1),o=Object(s.a)(r,2),l=o[0],d=o[1],j=Object(c.useState)(0),u=Object(s.a)(j,2),b=u[0],f=u[1],O=Object(c.useState)(!0),x=Object(s.a)(O,2),g=x[0],m=x[1],p=Object(c.useState)(null),v=Object(s.a)(p,2),k=v[0],C=v[1],y=function(){return b+1},w=function(){var n=e.deck.cards[b];return n?n.id:0},S=function(){return e.deck.cards.length-1},N=b===e.deck.cards.length-1,D=0===b,F=function(e){l?(d(!1),e()):e()},I=function(){d(!l)},E=function(n){e.onCardChange(n,w(),l)},T=function(){C("right"),m(!1),F((function(){return setTimeout((function(){C("left"),m(!0),f((function(e){return e<S()?e+1:S()}))}),230)}))},B=function(){C("left"),m(!1),F((function(){return setTimeout((function(){C("right"),m(!0),f((function(e){return e>0?e-1:0}))}),230)}))},W=function(){C("right"),m(!1),F((function(){return setTimeout((function(){C("left"),m(!0),f(e.deck.cards.length-1)}),230)}))},L=function(){C("left"),m(!1),F((function(){return setTimeout((function(){C("right"),m(!0),f(0)}),230)}))},P=function(n,t){d(!1),e.onAddCard(n,t),f(e.deck.cards.length-1)},R=function(){P("","")},J=function(){P(e.deck.cards[b].front,e.deck.cards[b].back)},_=function(){e.flaggedOnly&&e.deck.cards.length-1===b&&f((function(e){return 0===e?0:e-1})),e.onFlag(w())},Q=function(n){if(e.focus)switch(n.key){case"ArrowLeft":D||B();break;case"ArrowRight":N||T();break;case"ArrowUp":D||L();break;case"ArrowDown":N||W();break;case" ":n.preventDefault(),n.stopPropagation(),I()}};Object(c.useEffect)((function(){return window.addEventListener("keydown",Q),function(){return window.removeEventListener("keydown",Q)}}));var X=Object(G.jsxs)("div",{className:"DeckControls",children:[Object(G.jsxs)(z.a,{children:[Object(G.jsx)(h.a,{variant:"contained",color:"primary",startIcon:Object(G.jsx)(M.a,{}),disabled:D,onClick:L,children:"First"}),Object(G.jsx)(h.a,{variant:"contained",color:"primary",startIcon:Object(G.jsx)(V.a,{}),disabled:D,onClick:B,children:"Back"})]}),Object(G.jsxs)(z.a,{children:[Object(G.jsx)(h.a,{variant:"contained",color:"primary",startIcon:e.shuffled?Object(G.jsx)(q.a,{}):Object(G.jsx)(K.a,{}),disabled:1===e.deck.cards.length,onClick:function(){F((function(){return f(0)})),e.onShuffle()},children:"Shuffle"}),Object(G.jsx)(h.a,{variant:"contained",color:"primary",startIcon:e.flaggedOnly?Object(G.jsx)(q.a,{}):Object(G.jsx)(K.a,{}),disabled:e.deck.cards.filter((function(e){return e.flagged})).length<1,onClick:function(){F((function(){return f(0)})),e.onFlaggedOnly()},children:"Flagged Only"})]}),Object(G.jsxs)(z.a,{children:[Object(G.jsx)(h.a,{variant:"contained",color:"primary",endIcon:Object(G.jsx)(H.a,{}),disabled:N,onClick:T,children:"Next"}),Object(G.jsx)(h.a,{variant:"contained",color:"primary",endIcon:Object(G.jsx)($.a,{}),disabled:N,onClick:W,children:"Last"})]}),Object(G.jsx)(h.a,{color:"primary",variant:"contained",startIcon:Object(G.jsx)(A.a,{}),onClick:R,disabled:e.flaggedOnly,children:"Add Card"})]});return Object(c.useEffect)((function(){f(0),d(!1)}),[e.deck.id]),Object(G.jsxs)("div",{className:"DeckView",children:[Object(G.jsx)("div",{className:"CardSpace",children:Object(G.jsx)(U.a,{in:g,direction:k,children:Object(G.jsx)("div",{style:{height:"100%"},children:Object(G.jsxs)(te.a,{isFlipped:l,flipDirection:"vertical",flipSpeedBackToFront:.3,flipSpeedFrontToBack:.3,children:[Object(G.jsx)(ee,{id:w()+"-front",flipped:!1,onEditorChange:E,onFlip:I,onDuplicate:J,number:y(),count:e.deck.cards.length,content:null===(n=e.deck.cards[b])||void 0===n?void 0:n.front,flagged:null===(t=e.deck.cards[b])||void 0===t?void 0:t.flagged,onFlag:_,flaggedOnly:e.flaggedOnly}),Object(G.jsx)(ee,{id:w()+"-back",flipped:!0,onEditorChange:E,onFlip:I,onAddCard:R,onDuplicate:J,number:y(),count:e.deck.cards.length,content:null===(a=e.deck.cards[b])||void 0===a?void 0:a.back,flagged:null===(i=e.deck.cards[b])||void 0===i?void 0:i.flagged,onFlag:_,flaggedOnly:e.flaggedOnly})]})})})}),X]})}var ae=t(89),ie=t(207);function re(e){var n=Object(c.useState)(null),t=Object(s.a)(n,2),a=t[0],i=t[1];return Object(c.useEffect)((function(){if(a)try{document.getElementById(e.card.id+"-"+a).focus()}catch(n){}}),[a]),Object(c.useEffect)((function(){i(null)}),[]),Object(G.jsxs)("div",{className:"EditCardContainer",onBlur:function(n){n.target.id===e.card.id&&i(null)},children:[Object(G.jsxs)("div",{id:e.card.id,className:"EditCardFlex",children:[Object(G.jsx)("input",{id:e.card.id+"-dummy",style:{position:"absolute",opacity:0},onFocus:function(){i("front")}}),["front","back"].map((function(n){return Object(G.jsxs)(_.a,{square:!0,elevation:3,className:"EditCard",children:[Object(G.jsx)(d.a,{style:{color:"#888"},variant:"caption",children:n.toUpperCase()}),Object(G.jsx)("div",{className:"EditCardContent",onClick:function(){return function(e){i(e)}(n)},children:a?Object(G.jsx)(ae.a,{style:{textAlign:"center"},id:e.card.id+"-"+n,inline:!0,onEditorChange:function(t,c){return function(n,t,c){""!==n&&n!==e.content&&e.onChange(n,c)}(t,0,n)},onKeyDown:function(e){return e.stopPropagation()},onKeyUp:function(e){return e.preventDefault()},value:e.card[n],init:{menubar:!1,toolbar:"undo redo | fontsizeselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat",content_style:"body { font-family: Roboto; font-size: 18pt; text-align: center}"}}):Object(G.jsx)("div",{children:Z()(e.card[n]||'<p style="color: #888;">No content</p>')})})]},n)}))]}),Object(G.jsxs)("div",{className:"EditControls",onFocus:function(){i(null)},children:[Object(G.jsx)(N.a,{onClick:function(){e.onFlag(e.card.id)},className:e.card.flagged?"FlagButtonActive":null,children:Object(G.jsx)(Q.a,{})}),Object(G.jsx)(N.a,{onClick:function(){e.onChange("","front"),e.onChange("","back")},children:Object(G.jsx)(ie.a,{})}),Object(G.jsx)(N.a,{onClick:function(){e.onDelete(e.card.id)},children:Object(G.jsx)(B.a,{})})]})]})}function oe(e){var n=function(n){e.onFlag(n)};return Object(G.jsxs)("div",{style:{marginBottom:"80px"},children:[e.deck.cards.map((function(t,c){return Object(G.jsx)(re,{card:t,onChange:function(n,c){return function(n,t,c){e.onChange(n,t,"back"===c)}(n,t.id,c)},onFlag:n,onDelete:function(){return function(n){e.onDelete(n)}(c)}},t.id)})),Object(G.jsx)(h.a,{style:{marginTop:"40px"},size:"large",startIcon:Object(G.jsx)(A.a,{}),onClick:function(){e.onAddCard()},variant:"contained",color:"primary",children:"Add Card"})]})}var le=function(){var e=Object(c.useState)(null),n=Object(s.a)(e,2),t=n[0],i=n[1],r=Object(c.useState)(!1),P=Object(s.a)(r,2),R=P[0],z=P[1],U=Object(c.useState)(!1),M=Object(s.a)(U,2),V=M[0],q=M[1],K=Object(c.useState)(!1),H=Object(s.a)(K,2),$=H[0],_=H[1],Q=Object(c.useState)(!1),X=Object(s.a)(Q,2),Y=X[0],Z=X[1],ee=Object(c.useState)(!1),ne=Object(s.a)(ee,2),te=ne[0],ae=ne[1],ie=Object(c.useState)(""),re=Object(s.a)(ie,2),le=re[0],se=re[1],de=Object(c.useState)(""),je=Object(s.a)(de,2),ue=je[0],be=je[1],fe=Object(c.useState)(!1),Oe=Object(s.a)(fe,2),he=Oe[0],xe=Oe[1],ge=Object(c.useState)(!1),me=Object(s.a)(ge,2),pe=me[0],ve=me[1],ke=Object(c.useState)(null),Ce=Object(s.a)(ke,2),ye=Ce[0],we=Ce[1],Se=Object(c.useState)(!1),Ne=Object(s.a)(Se,2),De=Ne[0],Ae=Ne[1],Fe=Object(c.useState)(!1),Ie=Object(s.a)(Fe,2),Ee=Ie[0],Te=Ie[1],Be=Object(c.useState)(!1),We=Object(s.a)(Be,2),Le=We[0],Pe=We[1],Re=t&&!R&&!V&&!$&&!Y&&!te,Ge=function(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))},Je=function(){for(var e=[],n=Object.keys(localStorage),t=n.length;t--;)"lastOpen"!==n[t]&&e.push(JSON.parse(localStorage.getItem(n[t])));return e},ze=function(e){return new Date(e).toLocaleString([],{month:"numeric",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},Ue=function(e){e.modified=new Date,i(e),localStorage.setItem(e.id,JSON.stringify(e))},Me=function(){var e=Object(l.a)({},t);if(De&&(e.cards=t.cards.filter((function(e){return e.flagged}))),Ee){var n=Object(o.a)(e.cards);e.cards=function(e){for(var n,t,c=e.length;0!==c;)t=Math.floor(Math.random()*c),n=e[c-=1],e[c]=e[t],e[t]=n;return e}(n)}return e};Object(c.useEffect)((function(){i(JSON.parse(localStorage.getItem(localStorage.getItem("lastOpen"))))}),[]);var Ve=function(){q(!0),ve(!1)},qe=function(){q(!1)},Ke=function(){_(!1)},He=function(e){var n=e.target.value;n=n.substr(0,20),se(n)},$e=function(e){z(!1),i(JSON.parse(localStorage.getItem(e.id))),localStorage.setItem("lastOpen",e.id)},_e=function(e,n,c){var a=Object(l.a)({},t);c?a.cards.find((function(e){return e.id===n})).back=e:a.cards.find((function(e){return e.id===n})).front=e,Ue(a)},Qe=function(){Z(!1)},Xe=function(){ae(!1)},Ye=function(){ae(!1),localStorage.removeItem(t.id),i(null)},Ze=function(e,n){var c=Object(l.a)({},t);c.cards.push({id:Ge(),front:e,back:n,flagged:!1}),Ue(c)},en=function(e){if(1===t.cards.length)Ye();else{var n=Object(l.a)({},t);n.cards.splice(e,1),Ue(n)}},nn=function(e){De&&t.cards.filter((function(e){return e.flagged})).length<2&&tn();var n=Object(l.a)({},t);n.cards.find((function(n){return n.id===e})).flagged=!t.cards.find((function(n){return n.id===e})).flagged,Ue(n)},tn=function(){Ae((function(e){return!e}))},cn=Object(G.jsx)("div",{className:"EmptyDrawer",children:Object(G.jsx)(d.a,{variant:"h6",children:"No decks found"})}),an=Object(G.jsxs)(j.a,{open:te,onClose:Xe,children:[Object(G.jsxs)(u.a,{children:['Delete "',t?t.name:null,'"?']}),Object(G.jsx)(b.a,{children:Object(G.jsx)(f.a,{children:"This deck will be deleted forever (a really long time)."})}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(h.a,{onClick:Xe,children:"Cancel"}),Object(G.jsx)(h.a,{color:"secondary",onClick:Ye,children:"Delete"})]})]}),rn=Object(G.jsx)(j.a,{open:V,onClose:qe,children:Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),le.trim()&&(q(!1),function(e){Ae(!1);var n=Ge(),t={name:n,content:{id:n,name:e,created:new Date,modified:new Date,cards:[{id:Ge(),front:"",back:"",flagged:!1}]}};localStorage.setItem(t.name,JSON.stringify(t.content)),$e(t.content)}(le.trim()),se(""))},children:[Object(G.jsx)(u.a,{children:"New Deck"}),Object(G.jsx)(b.a,{children:Object(G.jsx)(x.a,{autoFocus:!0,label:"Deck name",value:le,onChange:He})}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(h.a,{onClick:qe,children:"Cancel"}),Object(G.jsx)(h.a,{disabled:!le.trim(),type:"submit",children:"Add"})]})]})}),on=Object(G.jsx)(j.a,{open:$,onClose:Ke,children:Object(G.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),le.trim()){_(!1);var n=Object(l.a)({},t);n.id=Ge(),n.name=le.trim(),n.created=ze(),localStorage.setItem(n.id,JSON.stringify(n)),se(""),he&&i(n)}},children:[Object(G.jsxs)(u.a,{children:['Duplicate "',t?t.name:null,'"']}),Object(G.jsxs)(b.a,{className:"DialogGrid",children:[Object(G.jsx)(x.a,{autoFocus:!0,label:"Deck name",value:le,onChange:He}),Object(G.jsx)(g.a,{control:Object(G.jsx)(m.a,{checked:he,onChange:function(){xe(!he)},color:"primary"}),label:"Open "+(le||"new deck")})]}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(h.a,{onClick:Ke,children:"Cancel"}),Object(G.jsx)(h.a,{disabled:!le.trim(),type:"submit",children:"Add"})]})]})}),ln=Object(G.jsx)(j.a,{open:Y,onClose:Qe,children:Object(G.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),ue.trim()){Z(!1);var n=Object(l.a)({},t);n.name=ue.trim(),Ue(n)}},children:[Object(G.jsx)(u.a,{children:"Rename Deck"}),Object(G.jsx)(b.a,{children:Object(G.jsx)(x.a,{autoFocus:!0,label:"Deck name",value:ue,onChange:function(e){var n=e.target.value;n=n.substr(0,20),be(n)}})}),Object(G.jsxs)(O.a,{children:[Object(G.jsx)(h.a,{onClick:Qe,children:"Cancel"}),Object(G.jsx)(h.a,{disabled:!ue.trim()||ue===t.name,type:"submit",children:"Rename"})]})]})}),sn=Object(G.jsxs)("div",{className:"Drawer",children:[Object(G.jsx)("div",{className:"DeckList",children:Je()&&Je().length>0?Object(G.jsx)(p.a,{children:Je().sort((function(e,n){return e.modified<n.modified?1:-1})).map((function(e){return Object(G.jsx)(v.a,{button:!0,onClick:function(){return $e(e)},selected:!!t&&t.id===e.id,children:Object(G.jsx)(k.a,{primary:e.name,secondary:ze(e.modified),primaryTypographyProps:{noWrap:!0}})},e.id)}))}):cn}),Object(G.jsx)(h.a,{className:"DrawerButton",disableElevation:!0,startIcon:Object(G.jsx)(A.a,{}),onClick:Ve,fullWidth:!0,variant:"contained",children:"New Deck"})]}),dn=Object(G.jsx)(J,{onClick:Ve,button:"New Deck",buttonIcon:Object(G.jsx)(A.a,{}),children:"Select a Deck from the drawer to get started."}),jn=t?Object(G.jsx)(ce,{deck:Me(),onCardChange:_e,onAddCard:Ze,onDeleteCard:en,onFlag:nn,onFlaggedOnly:tn,onShuffle:function(){Te((function(e){return!e}))},flaggedOnly:De,shuffled:Ee,focus:Re}):dn,un=t?Object(G.jsx)(oe,{deck:Me(),onChange:_e,onAddCard:Ze,onDeleteCard:en,onFlag:nn,onDelete:en}):dn,bn=Le?un:jn,fn=Object(G.jsxs)(C.a,{open:pe,onClose:function(){ve(!1)},anchorEl:ye,children:[Object(G.jsxs)(y.a,{onClick:Ve,children:[Object(G.jsx)(A.a,{className:"GrayText"}),"Add Deck"]}),Object(G.jsxs)(y.a,{disabled:!t,onClick:function(){_(!0),ve(!1)},children:[Object(G.jsx)(F.a,{className:"GrayText"}),"Duplicate Deck"]}),Object(G.jsxs)(y.a,{disabled:!t,onClick:function(){ve(!1),be(t.name),Z(!0)},children:[Object(G.jsx)(I.a,{className:"GrayText"}),"Rename Deck"]}),Object(G.jsxs)(y.a,{disabled:!t,onClick:function(){ve(!1),Pe(!Le)},children:[Le?Object(G.jsx)(E.a,{className:"GrayText"}):Object(G.jsx)(T.a,{className:"GrayText"}),Le?"View Deck":"Edit Deck"]}),Object(G.jsxs)(y.a,{disabled:!t,onClick:function(){ve(!1),ae(!0)},children:[Object(G.jsx)(B.a,{className:"GrayText"}),"Delete Deck"]})]});return Object(G.jsxs)("div",{className:"App",children:[Object(G.jsx)(w.a,{position:"sticky",elevation:3,children:Object(G.jsx)(S.a,{children:Object(G.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[Object(G.jsxs)("div",{className:"LeftAlign",style:{display:"flex",alignItems:"center"},children:[Object(G.jsx)(N.a,{edge:"start",color:"inherit",onClick:function(){z(!0)},children:Object(G.jsx)(W.a,{})}),Object(G.jsx)("span",{className:"TitleText",children:"bCards"})]}),Object(G.jsx)(d.a,{className:"TitleText CenterAlign",variant:"h6",noWrap:!0,children:t?t.name:"No deck loaded"}),Object(G.jsx)("span",{className:"AutoWidth RightAlign",children:Object(G.jsx)(N.a,{color:"inherit",onClick:function(e){we(e.currentTarget),ve(!0)},children:Object(G.jsx)(L.a,{})})})]})})}),Object(G.jsx)("div",{className:"Page",children:bn}),Object(G.jsxs)(a.a.Fragment,{children:[fn,Object(G.jsx)(D.a,{anchor:"left",open:R,onClose:function(){z(!1)},children:sn}),rn,an,on,ln]})]})},se=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function de(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(G.jsx)(a.a.StrictMode,{children:Object(G.jsx)(le,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/b-cards",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/b-cards","/service-worker.js");se?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(t){var c=t.headers.get("content-type");404===t.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):de(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):de(n,e)}))}}()}},[[158,1,2]]]);
//# sourceMappingURL=main.2fe42e59.chunk.js.map