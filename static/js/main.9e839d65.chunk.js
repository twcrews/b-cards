(this["webpackJsonpb-cards"]=this["webpackJsonpb-cards"]||[]).push([[0],{107:function(e,t,n){},140:function(e,t){},158:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),i=n(10),r=n.n(i),o=n(90),l=n(29),s=n(13),d=n(34),j=n(209),u=n(210),b=n(211),f=n(212),O=n(213),x=n(160),h=n(226),g=n(215),m=n(227),p=n(214),v=n(162),k=n(216),C=n(91),y=n(217),N=n(221),S=n(222),D=n(206),F=n(225),w=n(205),A=n(195),I=n(218),E=n(219),T=n(220),B=n(208),L=n(223),G=n(224),J=(n(107),n(83)),R=n.n(J),z=n(2);function P(e){return Object(z.jsxs)("div",{className:"EmptyState",children:[Object(z.jsx)(R.a,{style:{fontSize:200}}),Object(z.jsx)(d.a,{variant:"h6",children:e.children}),Object(z.jsx)(x.a,{variant:"contained",onClick:e.onClick,color:"primary",startIcon:e.buttonIcon,children:e.button})]})}var W=n(198),M=n(161),V=n(199),U=n(200),q=n(201),K=n(202),H=n(203),_=n(204),Q=n(194),X=n(196),Y=n(197),Z=n(53),$=n.n(Z);function ee(e){return Object(z.jsxs)(Q.a,{elevation:3,square:!0,className:"Card",children:[Object(z.jsxs)("div",{className:"CardHeader BorderBox CenterVertical",children:[Object(z.jsx)("div",{className:"LeftAlign",children:Object(z.jsx)(d.a,{variant:"h6",children:e.flipped?"Back":"Front"})}),Object(z.jsx)("div",{className:"CenterAlign",children:Object(z.jsx)(d.a,{variant:"h6",children:e.number+" of "+e.count})}),Object(z.jsx)("div",{className:"RightAlign"})]}),Object(z.jsx)("div",{className:"CardContent",children:Object(z.jsx)("div",{children:$()(e.content)})}),Object(z.jsxs)("div",{className:"CardTools CenterVertical BorderBox",children:[Object(z.jsx)("span",{className:"AutoWidth LeftAlign",children:Object(z.jsx)(x.a,{onClick:e.onDuplicate,size:"large",startIcon:Object(z.jsx)(A.a,{}),disabled:e.flaggedOnly,children:"Duplicate"})}),Object(z.jsx)("span",{className:"AutoWidth CenterAlign",children:Object(z.jsx)(x.a,{className:e.flagged?"FlagButtonActive":"",variant:e.flagged?"contained":"text",startIcon:Object(z.jsx)(X.a,{color:"inherit"}),onClick:function(){e.onFlag()},size:"large",disableElevation:!0,children:e.flagged?"Flagged":"Flag"})}),Object(z.jsx)("div",{className:"FlexGap RightAlign",children:Object(z.jsx)(x.a,{onClick:e.onFlip,startIcon:Object(z.jsx)(Y.a,{}),size:"large",children:"Flip"})})]})]})}var te=n(88),ne=n.n(te);function ce(e){var t,n,a,i,r=Object(c.useState)(!1),o=Object(s.a)(r,2),l=o[0],d=o[1],j=Object(c.useState)(0),u=Object(s.a)(j,2),b=u[0],f=u[1],O=Object(c.useState)(!0),h=Object(s.a)(O,2),g=h[0],m=h[1],p=Object(c.useState)(null),v=Object(s.a)(p,2),k=v[0],C=v[1],y=function(){return b+1},N=function(){var t=e.deck.cards[b];return t?t.id:0},S=function(){return e.deck.cards.length-1},D=b===e.deck.cards.length-1,F=0===b,A=function(e){l?(d(!1),e()):e()},I=function(){d(!l)},E=function(t){e.onCardChange(t,N(),l)},T=function(){C("right"),m(!1),A((function(){return setTimeout((function(){C("left"),m(!0),f((function(e){return e<S()?e+1:S()}))}),230)}))},B=function(){C("left"),m(!1),A((function(){return setTimeout((function(){C("right"),m(!0),f((function(e){return e>0?e-1:0}))}),230)}))},L=function(){C("right"),m(!1),A((function(){return setTimeout((function(){C("left"),m(!0),f(e.deck.cards.length-1)}),230)}))},G=function(){C("left"),m(!1),A((function(){return setTimeout((function(){C("right"),m(!0),f(0)}),230)}))},J=function(t,n){d(!1),e.onAddCard(t,n),f(e.deck.cards.length-1)},R=function(){J("","")},P=function(){J(e.deck.cards[b].front,e.deck.cards[b].back)},Q=function(){e.flaggedOnly&&e.deck.cards.length-1===b&&f((function(e){return 0===e?0:e-1})),e.onFlag(N())},X=function(t){if(e.focus)switch(t.key){case"ArrowLeft":F||B();break;case"ArrowRight":D||T();break;case"ArrowUp":F||G();break;case"ArrowDown":D||L();break;case" ":t.preventDefault(),t.stopPropagation(),I()}};Object(c.useEffect)((function(){return window.addEventListener("keydown",X),function(){return window.removeEventListener("keydown",X)}}));var Y=Object(z.jsxs)("div",{className:"DeckControls",children:[Object(z.jsxs)(W.a,{children:[Object(z.jsx)(x.a,{variant:"contained",color:"primary",startIcon:Object(z.jsx)(V.a,{}),disabled:F,onClick:G,children:"First"}),Object(z.jsx)(x.a,{variant:"contained",color:"primary",startIcon:Object(z.jsx)(U.a,{}),disabled:F,onClick:B,children:"Back"})]}),Object(z.jsxs)(W.a,{children:[Object(z.jsx)(x.a,{variant:"contained",color:"primary",startIcon:e.shuffled?Object(z.jsx)(q.a,{}):Object(z.jsx)(K.a,{}),disabled:1===e.deck.cards.length,onClick:function(){A((function(){return f(0)})),e.onShuffle()},children:"Shuffle"}),Object(z.jsx)(x.a,{variant:"contained",color:"primary",startIcon:e.flaggedOnly?Object(z.jsx)(q.a,{}):Object(z.jsx)(K.a,{}),disabled:e.deck.cards.filter((function(e){return e.flagged})).length<1,onClick:function(){A((function(){return f(0)})),e.onFlaggedOnly()},children:"Flagged Only"})]}),Object(z.jsxs)(W.a,{children:[Object(z.jsx)(x.a,{variant:"contained",color:"primary",endIcon:Object(z.jsx)(H.a,{}),disabled:D,onClick:T,children:"Next"}),Object(z.jsx)(x.a,{variant:"contained",color:"primary",endIcon:Object(z.jsx)(_.a,{}),disabled:D,onClick:L,children:"Last"})]}),Object(z.jsx)(x.a,{color:"primary",variant:"contained",startIcon:Object(z.jsx)(w.a,{}),onClick:R,disabled:e.flaggedOnly,children:"Add Card"})]});return Object(c.useEffect)((function(){f(0),d(!1)}),[e.deck.id]),Object(z.jsxs)("div",{className:"DeckView",children:[Object(z.jsx)("div",{className:"CardSpace",children:Object(z.jsx)(M.a,{in:g,direction:k,children:Object(z.jsx)("div",{style:{height:"100%"},children:Object(z.jsxs)(ne.a,{isFlipped:l,flipDirection:"vertical",flipSpeedBackToFront:.3,flipSpeedFrontToBack:.3,children:[Object(z.jsx)(ee,{id:N()+"-front",flipped:!1,onEditorChange:E,onFlip:I,onDuplicate:P,number:y(),count:e.deck.cards.length,content:null===(t=e.deck.cards[b])||void 0===t?void 0:t.front,flagged:null===(n=e.deck.cards[b])||void 0===n?void 0:n.flagged,onFlag:Q,flaggedOnly:e.flaggedOnly}),Object(z.jsx)(ee,{id:N()+"-back",flipped:!0,onEditorChange:E,onFlip:I,onAddCard:R,onDuplicate:P,number:y(),count:e.deck.cards.length,content:null===(a=e.deck.cards[b])||void 0===a?void 0:a.back,flagged:null===(i=e.deck.cards[b])||void 0===i?void 0:i.flagged,onFlag:Q,flaggedOnly:e.flaggedOnly})]})})})}),Y]})}var ae=n(89),ie=n(207);function re(e){var t=Object(c.useState)(null),n=Object(s.a)(t,2),a=n[0],i=n[1];return Object(c.useEffect)((function(){if(a)try{document.getElementById(e.card.id+"-"+a).focus()}catch(t){}}),[a]),Object(c.useEffect)((function(){i(null)}),[]),Object(z.jsxs)("div",{className:"EditCardContainer",onBlur:function(t){t.target.id===e.card.id&&i(null)},children:[Object(z.jsxs)("div",{id:e.card.id,className:"EditCardFlex",children:[Object(z.jsx)("input",{id:e.card.id+"-dummy",style:{position:"absolute",opacity:0},onFocus:function(){i("front")}}),["front","back"].map((function(t){return Object(z.jsxs)(Q.a,{square:!0,elevation:3,className:"EditCard",children:[Object(z.jsx)(d.a,{style:{color:"#888"},variant:"caption",children:t.toUpperCase()}),Object(z.jsx)("div",{className:"EditCardContent",onClick:function(){return function(e){i(e)}(t)},children:a?Object(z.jsx)(ae.a,{style:{textAlign:"center"},id:e.card.id+"-"+t,inline:!0,onEditorChange:function(n,c){return function(t,n,c){""!==t&&t!==e.content&&e.onChange(t,c)}(n,0,t)},onKeyDown:function(e){return e.stopPropagation()},onKeyUp:function(e){return e.preventDefault()},value:e.card[t],init:{menubar:!1,toolbar:"undo redo | fontsizeselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat",content_style:"body { font-family: Roboto; font-size: 18pt; text-align: center}"}}):Object(z.jsx)("div",{children:$()(e.card[t]||'<p style="color: #888;">No content</p>')})})]},t)}))]}),Object(z.jsxs)("div",{className:"EditControls",onFocus:function(){i(null)},children:[Object(z.jsx)(D.a,{onClick:function(){e.onFlag(e.card.id)},className:e.card.flagged?"FlagButtonActive":null,children:Object(z.jsx)(X.a,{})}),Object(z.jsx)(D.a,{onClick:function(){e.onChange("","front"),e.onChange("","back")},children:Object(z.jsx)(ie.a,{})}),Object(z.jsx)(D.a,{onClick:function(){e.onDelete(e.card.id)},children:Object(z.jsx)(B.a,{})})]})]})}function oe(e){var t=function(t){e.onFlag(t)};return Object(z.jsxs)("div",{style:{marginBottom:"80px"},children:[e.deck.cards.map((function(n,c){return Object(z.jsx)(re,{card:n,onChange:function(t,c){return function(t,n,c){e.onChange(t,n,"back"===c)}(t,n.id,c)},onFlag:t,onDelete:function(){return function(t){e.onDelete(t)}(c)}},n.id)})),Object(z.jsx)(x.a,{style:{marginTop:"40px"},size:"large",startIcon:Object(z.jsx)(w.a,{}),onClick:function(){e.onAddCard()},variant:"contained",color:"primary",children:"Add Card"})]})}var le=function(){var e=Object(c.useState)(null),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(c.useState)(!1),J=Object(s.a)(r,2),R=J[0],W=J[1],M=Object(c.useState)(!1),V=Object(s.a)(M,2),U=V[0],q=V[1],K=Object(c.useState)(!1),H=Object(s.a)(K,2),_=H[0],Q=H[1],X=Object(c.useState)(!1),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],ee=Object(c.useState)(!1),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],ie=Object(c.useState)(""),re=Object(s.a)(ie,2),le=re[0],se=re[1],de=Object(c.useState)(""),je=Object(s.a)(de,2),ue=je[0],be=je[1],fe=Object(c.useState)(!1),Oe=Object(s.a)(fe,2),xe=Oe[0],he=Oe[1],ge=Object(c.useState)(!1),me=Object(s.a)(ge,2),pe=me[0],ve=me[1],ke=Object(c.useState)(null),Ce=Object(s.a)(ke,2),ye=Ce[0],Ne=Ce[1],Se=Object(c.useState)(!1),De=Object(s.a)(Se,2),Fe=De[0],we=De[1],Ae=Object(c.useState)(!1),Ie=Object(s.a)(Ae,2),Ee=Ie[0],Te=Ie[1],Be=Object(c.useState)(!1),Le=Object(s.a)(Be,2),Ge=Le[0],Je=Le[1],Re=n&&!R&&!U&&!_&&!Z&&!ne,ze=function(){return"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".replace(/x/g,(function(e){return(16*Math.random()|0).toString(16)}))},Pe=function(){for(var e=[],t=Object.keys(localStorage),n=t.length;n--;)"lastOpen"!==t[n]&&e.push(JSON.parse(localStorage.getItem(t[n])));return e},We=function(e){return new Date(e).toLocaleString([],{month:"numeric",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},Me=function(e){e.modified=new Date,i(e),localStorage.setItem(e.id,JSON.stringify(e))},Ve=function(){var e=Object(l.a)({},n);if(Fe&&(e.cards=n.cards.filter((function(e){return e.flagged}))),Ee){var t=Object(o.a)(e.cards);e.cards=function(e){for(var t,n,c=e.length;0!==c;)n=Math.floor(Math.random()*c),t=e[c-=1],e[c]=e[n],e[n]=t;return e}(t)}return e};Object(c.useEffect)((function(){i(JSON.parse(localStorage.getItem(localStorage.getItem("lastOpen"))))}),[]);var Ue=function(){q(!0),ve(!1)},qe=function(){q(!1)},Ke=function(){Q(!1)},He=function(e){var t=e.target.value;t=t.substr(0,20),se(t)},_e=function(e){W(!1),i(JSON.parse(localStorage.getItem(e.id))),localStorage.setItem("lastOpen",e.id)},Qe=function(e,t,c){var a=Object(l.a)({},n);c?a.cards.find((function(e){return e.id===t})).back=e:a.cards.find((function(e){return e.id===t})).front=e,Me(a)},Xe=function(){$(!1)},Ye=function(){ae(!1)},Ze=function(){ae(!1),localStorage.removeItem(n.id),i(null)},$e=function(e,t){var c=Object(l.a)({},n);c.cards.push({id:ze(),front:e,back:t,flagged:!1}),Me(c)},et=function(e){if(1===n.cards.length)Ze();else{var t=Object(l.a)({},n);t.cards.splice(e,1),Me(t)}},tt=function(e){Fe&&n.cards.filter((function(e){return e.flagged})).length<2&&nt();var t=Object(l.a)({},n);t.cards.find((function(t){return t.id===e})).flagged=!n.cards.find((function(t){return t.id===e})).flagged,Me(t)},nt=function(){we((function(e){return!e}))},ct=Object(z.jsx)("div",{className:"EmptyDrawer",children:Object(z.jsx)(d.a,{variant:"h6",children:"No decks found"})}),at=Object(z.jsxs)(j.a,{open:ne,onClose:Ye,children:[Object(z.jsxs)(u.a,{children:['Delete "',n?n.name:null,'"?']}),Object(z.jsx)(b.a,{children:Object(z.jsx)(f.a,{children:"This deck will be deleted forever (a really long time)."})}),Object(z.jsxs)(O.a,{children:[Object(z.jsx)(x.a,{onClick:Ye,children:"Cancel"}),Object(z.jsx)(x.a,{color:"secondary",onClick:Ze,children:"Delete"})]})]}),it=Object(z.jsx)(j.a,{open:U,onClose:qe,children:Object(z.jsxs)("form",{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),le.trim()&&(q(!1),function(e){we(!1);var t=ze(),n={name:t,content:{id:t,name:e,created:new Date,modified:new Date,cards:[{id:ze(),front:"",back:"",flagged:!1}]}};localStorage.setItem(n.name,JSON.stringify(n.content)),_e(n.content)}(le.trim()),se(""))},children:[Object(z.jsx)(u.a,{children:"New Deck"}),Object(z.jsx)(b.a,{children:Object(z.jsx)(h.a,{autoFocus:!0,label:"Deck name",value:le,onChange:He})}),Object(z.jsxs)(O.a,{children:[Object(z.jsx)(x.a,{onClick:qe,children:"Cancel"}),Object(z.jsx)(x.a,{disabled:!le.trim(),type:"submit",children:"Add"})]})]})}),rt=Object(z.jsx)(j.a,{open:_,onClose:Ke,children:Object(z.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),le.trim()){Q(!1);var t=Object(l.a)({},n);t.id=ze(),t.name=le.trim(),t.created=We(),localStorage.setItem(t.id,JSON.stringify(t)),se(""),xe&&i(t)}},children:[Object(z.jsxs)(u.a,{children:['Duplicate "',n?n.name:null,'"']}),Object(z.jsxs)(b.a,{className:"DialogGrid",children:[Object(z.jsx)(h.a,{autoFocus:!0,label:"Deck name",value:le,onChange:He}),Object(z.jsx)(g.a,{control:Object(z.jsx)(m.a,{checked:xe,onChange:function(){he(!xe)},color:"primary"}),label:"Open "+(le||"new deck")})]}),Object(z.jsxs)(O.a,{children:[Object(z.jsx)(x.a,{onClick:Ke,children:"Cancel"}),Object(z.jsx)(x.a,{disabled:!le.trim(),type:"submit",children:"Add"})]})]})}),ot=Object(z.jsx)(j.a,{open:Z,onClose:Xe,children:Object(z.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),ue.trim()){$(!1);var t=Object(l.a)({},n);t.name=ue.trim(),Me(t)}},children:[Object(z.jsx)(u.a,{children:"Rename Deck"}),Object(z.jsx)(b.a,{children:Object(z.jsx)(h.a,{autoFocus:!0,label:"Deck name",value:ue,onChange:function(e){var t=e.target.value;t=t.substr(0,20),be(t)}})}),Object(z.jsxs)(O.a,{children:[Object(z.jsx)(x.a,{onClick:Xe,children:"Cancel"}),Object(z.jsx)(x.a,{disabled:!ue.trim()||ue===n.name,type:"submit",children:"Rename"})]})]})}),lt=Object(z.jsxs)("div",{className:"Drawer",children:[Object(z.jsx)("div",{className:"DeckList",children:Pe()&&Pe().length>0?Object(z.jsx)(p.a,{children:Pe().sort((function(e,t){return e.modified<t.modified?1:-1})).map((function(e){return Object(z.jsx)(v.a,{button:!0,onClick:function(){return _e(e)},selected:!!n&&n.id===e.id,children:Object(z.jsx)(k.a,{primary:e.name,secondary:We(e.modified),primaryTypographyProps:{noWrap:!0}})},e.id)}))}):ct}),Object(z.jsx)(x.a,{className:"DrawerButton",disableElevation:!0,startIcon:Object(z.jsx)(w.a,{}),onClick:Ue,fullWidth:!0,variant:"contained",children:"New Deck"})]}),st=Object(z.jsx)(P,{onClick:Ue,button:"New Deck",buttonIcon:Object(z.jsx)(w.a,{}),children:"Select a Deck from the drawer to get started."}),dt=n?Object(z.jsx)(ce,{deck:Ve(),onCardChange:Qe,onAddCard:$e,onDeleteCard:et,onFlag:tt,onFlaggedOnly:nt,onShuffle:function(){Te((function(e){return!e}))},flaggedOnly:Fe,shuffled:Ee,focus:Re}):st,jt=n?Object(z.jsx)(oe,{deck:Ve(),onChange:Qe,onAddCard:$e,onDeleteCard:et,onFlag:tt,onDelete:et}):st,ut=Ge?jt:dt,bt=Object(z.jsxs)(C.a,{open:pe,onClose:function(){ve(!1)},anchorEl:ye,children:[Object(z.jsxs)(y.a,{onClick:Ue,children:[Object(z.jsx)(w.a,{className:"GrayText"}),"Add Deck"]}),Object(z.jsxs)(y.a,{disabled:!n,onClick:function(){Q(!0),ve(!1)},children:[Object(z.jsx)(A.a,{className:"GrayText"}),"Duplicate Deck"]}),Object(z.jsxs)(y.a,{disabled:!n,onClick:function(){ve(!1),be(n.name),$(!0)},children:[Object(z.jsx)(I.a,{className:"GrayText"}),"Rename Deck"]}),Object(z.jsxs)(y.a,{disabled:!n,onClick:function(){ve(!1),Je(!Ge)},children:[Ge?Object(z.jsx)(E.a,{className:"GrayText"}):Object(z.jsx)(T.a,{className:"GrayText"}),Ge?"View Deck":"Edit Deck"]}),Object(z.jsxs)(y.a,{disabled:!n,onClick:function(){ve(!1),ae(!0)},children:[Object(z.jsx)(B.a,{className:"GrayText"}),"Delete Deck"]})]});return Object(z.jsxs)("div",{className:"App",children:[Object(z.jsx)(N.a,{position:"sticky",elevation:3,children:Object(z.jsx)(S.a,{children:Object(z.jsxs)("div",{style:{display:"flex",width:"100%",justifyContent:"space-between",alignItems:"center"},children:[Object(z.jsxs)("div",{className:"LeftAlign",style:{display:"flex",alignItems:"center"},children:[Object(z.jsx)(D.a,{edge:"start",color:"inherit",onClick:function(){W(!0)},children:Object(z.jsx)(L.a,{})}),Object(z.jsx)("span",{className:"TitleText",children:"bCards"})]}),Object(z.jsx)(d.a,{className:"TitleText CenterAlign",variant:"h6",noWrap:!0,children:n?n.name:"No deck loaded"}),Object(z.jsx)("span",{className:"AutoWidth RightAlign",children:Object(z.jsx)(D.a,{color:"inherit",onClick:function(e){Ne(e.currentTarget),ve(!0)},children:Object(z.jsx)(G.a,{})})})]})})}),Object(z.jsx)("div",{className:"Page",children:ut}),Object(z.jsxs)(a.a.Fragment,{children:[bt,Object(z.jsx)(F.a,{anchor:"left",open:R,onClose:function(){W(!1)},children:lt}),it,at,rt,ot]})]})};r.a.render(Object(z.jsx)(a.a.StrictMode,{children:Object(z.jsx)(le,{})}),document.getElementById("root"))}},[[158,1,2]]]);
//# sourceMappingURL=main.9e839d65.chunk.js.map